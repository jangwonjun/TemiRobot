# ADB 연결 타임아웃 문제 해결 가이드

## 🔍 문제: ADB 연결 시 타임아웃 발생

`adb connect 192.168.0.17:5555` 실행 시 타임아웃이 발생하는 경우의 해결 방법입니다.

## ✅ 체크리스트

### 1. 네트워크 연결 확인

로봇과 컴퓨터가 같은 Wi-Fi 네트워크에 연결되어 있는지 확인:

```bash
# 로봇 IP로 ping 테스트
ping 192.168.0.17

# 응답이 오면 네트워크 연결 정상
# 응답이 없으면 네트워크 문제
```

**해결책**:
- 로봇과 컴퓨터가 같은 Wi-Fi에 연결되어 있는지 확인
- Wi-Fi 비밀번호가 올바른지 확인
- 네트워크가 2.4GHz 대역인지 확인 (일부 기기는 5GHz를 지원하지 않음)

### 2. 로봇에서 네트워크 디버깅 활성화

테미 로봇에서 네트워크 디버깅이 활성화되어 있어야 합니다:

1. **로봇 화면에서**:
   - 설정 → 개발자 옵션 → 네트워크 디버깅 활성화
   - 또는 USB 디버깅 활성화

2. **개발자 모드 활성화**:
   - 설정 → 시스템 정보 → 빌드 번호 7번 연속 터치
   - 개발자 옵션 메뉴가 나타남

### 3. ADB 서버 재시작

```bash
# ADB 서버 중지 및 재시작
adb kill-server
adb start-server

# 연결 재시도
adb connect 192.168.0.17:5555
```

### 4. 포트 번호 확인

테미 로봇의 ADB 포트가 5555가 아닐 수 있습니다:

```bash
# 다른 포트 시도
adb connect 192.168.0.17:5556
adb connect 192.168.0.17:5037
adb connect 192.168.0.17:8080
```

### 5. IP 주소 확인

로봇의 IP 주소가 변경되었을 수 있습니다:

**로봇 화면에서 확인**:
- 설정 → 네트워크 → Wi-Fi → 연결된 네트워크
- IP 주소 확인

**또는 네트워크 스캔**:
```bash
# 같은 네트워크에서 테미 로봇 찾기
nmap -sn 192.168.0.0/24
```

### 6. 방화벽 확인

컴퓨터의 방화벽이 포트 5555를 차단할 수 있습니다:

**macOS**:
```bash
# 방화벽 상태 확인
/usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate

# 필요시 방화벽에서 포트 허용
```

**Windows**:
- Windows 방화벽 설정에서 포트 5555 허용

### 7. USB 연결 후 네트워크 디버깅 활성화

USB 케이블로 먼저 연결한 후 네트워크 디버깅을 활성화할 수 있습니다:

```bash
# USB로 연결 (케이블 필요)
adb devices

# USB 연결 후 네트워크 디버깅 포트 설정
adb tcpip 5555

# USB 케이블 제거 후 네트워크로 연결
adb connect 192.168.0.17:5555
```

## 🔧 단계별 해결 방법

### 방법 1: 기본 해결 (가장 흔한 경우)

```bash
# 1. ADB 서버 재시작
adb kill-server
adb start-server

# 2. 연결 재시도
adb connect 192.168.0.17:5555

# 3. 연결 확인
adb devices
```

### 방법 2: 로봇 재부팅

1. 테미 로봇 재부팅
2. 네트워크 디버깅 다시 활성화
3. ADB 연결 재시도

### 방법 3: USB를 통한 초기 설정

1. USB 케이블로 로봇과 컴퓨터 연결
2. `adb devices`로 USB 연결 확인
3. `adb tcpip 5555`로 네트워크 디버깅 포트 설정
4. USB 케이블 제거
5. `adb connect 192.168.0.17:5555`로 네트워크 연결

### 방법 4: 포트 스캔

로봇에서 열려있는 포트를 확인:

```bash
# nmap 설치 필요 (macOS: brew install nmap)
nmap -p 5555,5556,5037,8080 192.168.0.17
```

열려있는 포트를 찾아서 연결 시도.

## 🐛 일반적인 오류 메시지

### "unable to connect to 192.168.0.17:5555"

**원인**: 네트워크 연결 문제 또는 포트가 닫혀있음

**해결책**:
1. ping 테스트로 네트워크 확인
2. 로봇에서 네트워크 디버깅 활성화 확인
3. 다른 포트 시도

### "connection refused"

**원인**: 포트는 열려있지만 ADB 서비스가 실행되지 않음

**해결책**:
1. 로봇에서 네트워크 디버깅 재활성화
2. 로봇 재부팅

### "device unauthorized"

**원인**: 로봇에서 디버깅 허용을 승인하지 않음

**해결책**:
1. 로봇 화면에서 "USB 디버깅 허용" 팝업 확인
2. "항상 이 컴퓨터에서 허용" 체크
3. "허용" 버튼 클릭

## 📱 테미 로봇 설정 확인

### 필수 설정

1. ✅ **개발자 모드 활성화**
   - 설정 → 시스템 정보 → 빌드 번호 7번 터치

2. ✅ **네트워크 디버깅 활성화**
   - 설정 → 개발자 옵션 → 네트워크 디버깅 ON

3. ✅ **Wi-Fi 연결 확인**
   - 설정 → 네트워크 → Wi-Fi → 연결 상태 확인
   - IP 주소 확인

4. ✅ **방화벽 설정**
   - 로봇의 방화벽이 포트 5555를 차단하지 않는지 확인

## 💡 팁

1. **안정적인 연결**: USB 케이블로 먼저 연결한 후 네트워크 디버깅 설정
2. **IP 주소 고정**: 라우터에서 로봇의 IP 주소를 고정하면 편리합니다
3. **로그 확인**: `adb logcat`으로 연결 상태 확인 가능
4. **다른 방법**: 테미 앱을 통해 로봇 정보 확인

## 🔍 디버깅 명령어

```bash
# ADB 버전 확인
adb version

# 연결된 기기 확인
adb devices

# 연결 상태 상세 확인
adb devices -l

# 네트워크 연결 테스트
telnet 192.168.0.17 5555

# 포트 스캔
nmap -p 5555 192.168.0.17
```

## 📞 추가 도움

문제가 계속되면:
1. 테미 로봇 재부팅
2. 컴퓨터 재부팅
3. Wi-Fi 재연결
4. 테미 공식 지원팀 문의

---

**대부분의 경우 ADB 서버 재시작과 로봇의 네트워크 디버깅 재활성화로 해결됩니다!** 🔧

